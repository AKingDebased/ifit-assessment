<!DOCTYPE html>
<html lang="en" class="has-navbar-fixed-top">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>iFit</title>
		<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300italic,300,400italic,600,600italic,700,700italic,800,800italic' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.css" integrity="sha256-UK1EiopXIL+KVhfbFa8xrmAWPeBjMVdvYMYkTAEv/HI=" crossorigin="anonymous" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick-theme.min.css" integrity="sha256-4hqlsNP9KM6+2eA8VUT0kk4RsMRTeS7QGHIM+MZ5sLY=" crossorigin="anonymous" />
		<link rel="stylesheet" href="css/normalize.css">
		<link rel="stylesheet" href="css/bulma.min.css">
		<link rel="stylesheet" href="css/style.css">
	</head>

	<body id="home">
		<!-- TODO: Implement a hamburger menu -->
		<nav class="navbar navbar--home is-fixed-top">
			<div class="navbar-menu navbar-menu--top">
				<div class="navbar-start">
					<a class="navbar-item">Blog</a>
			
					<a class="navbar-item">Nourish</a>
			
					<a class="navbar-item">Shop</a>
				</div>
			</div>

			<div class="navbar-menu navbar-menu--hero">
				<div class="navbar-brand navbar-brand--hero">
					<a class="navbar-item" href="#"">
						<img src="img/logos/brand.png" width="75" height="24">
					</a>
					<span class="navbar-brand-copy">COACH</span>
				</div>
				<div class="navbar-start navbar-start--hero">
					<a class="navbar-item">
						EXERCISE
					</a>
			
					<a class="navbar-item">
						NUTRITION
					</a>
			
					<a class="navbar-item">
						ACTIVITY
					</a>

					<a class="navbar-item">
						SLEEP
					</a>
				</div>
		
				<div class="navbar-end">
					<div class="navbar-item">
						<div class="buttons">
							<a class="button is-primary">
								<strong>Sign up</strong>
							</a>
						</div>
					</div>
				</div>
			</div>
		</nav>
		<section class="hero is-fullheight-with-navbar hero--home">
			<div class="hero-body">
				<div class="container">1
					<div class="columns is-centered">
						<div class="column is-9">
							<div class="hero-copy__container">
								<h1 class="title hero-copy__title">
									The best personal training, right in your own home
								</h1>
								<button class="button hero-copy__button">Join iFit Coach</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<section class="section reviews__container">
			<div class="reviews__carousel">
				<!-- Ideally, this could be done with a loop, ideally with an HTML template system. For simplicity's sake, this has been done the naive, repetitive, but simple way -->
				<div class="reviews__item-container">
					<div class="reviews__item-contents">
						<img class="review__item-logo" src="img/logos/wired-logo.png" width="133" height="23">
						<p class="reviews__copy">"Literally transports you from home to wherever you choose to run."</p>
					</div>
				</div>
				<div class="reviews__item-container">
					<div class="reviews__item-contents">
						<img class="review__item-logo" src="img/logos/mashable-logo.png" width="133" height="23">
						<p class="reviews__copy">"Breathes new life into a tired, old running routine."</p>
					</div>
				</div>
				<div class="reviews__item-container"7></div>
				<div class="reviews__item-container"7></div>
				<div class="reviews__item-container"7></div>
				<div class="reviews__item-container"7></div>
			  </div>
		</section>
		<section class="section">
			<div class="container grid-container">
				<div id="grid-roller" class="lds-roller"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
			</div>
		</section>
		<section class="section">
			<div class="columns is-centered">
				<div class="column is-5">
					<h3 class="equipment__title">Interested in our exciting iFit-enabled equipment?</h3>
				</div>
			</div>
			<div id="equipment-grid-roller" class="equipment-grid-container">
			</div>
		</section>


		<script
		src="https://code.jquery.com/jquery-3.5.1.min.js"
		integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
		crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.js" integrity="sha256-NXRS8qVcmZ3dOv3LziwznUHPegFhPZ1F/4inU7uC8h0=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js" integrity="sha256-VeNaFBVDhoX3H+gJ37DpT/nTuZTdjYro9yBruHjVmoQ=" crossorigin="anonymous"></script>
			<!-- Using this "fake" script tag to hold HTML templates -->
		<script id="grid-card-template" type="template">
			<div class="grid-card">
				<div class="grid-card__image-section grid-card__image-section--<%= bgImgId %>">
					<% if (workoutsNum) { %>
					<div class="grid-card__workouts-section">
						<span class="grid-card__workouts-amount"><%= workoutsNum %></span>
						<span class="grid-card__workouts-copy">Workouts</span>
						<!-- TODO: Playlist icon-->
					</div>
					<% } %>
				</div>
				<div class="grid-card__copy-container">
					<div class="grid-card__copy-title-container">
						<div class="grid-card__copy-title"><%= title %></div>
						<img src="img/grid/grid-img-1.png" alt="" class="grid-card__icon" height="28" width="28">
					</div>
					<% if (time && miles) { %>
					<div class="grid-card__copy-details">
						<!-- TODO: Need icons -->
						<div class="grid-card__time"><%= time %></div>
						<div class="grid-card__miles"><%= miles %></div>
					</div>
					<% } %>
					<% if (hasDetails) { %>
					<div class="grid-card__view-details">View Details</div>
					<% } %>
				</div>
			</div>
		</script>
		<script id="equipment-grid-template" type="template">
			<div class="equipment__grid-card">
				<img class="equipment__image" src="<%= imgSrc %>"> 
				<h4 class="equipment__copy"><%= name %></h4>
			</div>
		</script>
		<script>
			// Init carousel
			$('.reviews__carousel').slick({
				slidesToShow: 3,
				centerMode: true,
				infinite: true,
				draggable: true,
				arrows: true,
				centerPadding: '24px'
			});

			// Render card grid
			const cardsData = [{
				title: 'Lake Inniscarra, Ireland — Pyramid',
				hasDetails: true,
				time: '30:53',
				miles: '6,248',
				bgImgId: 1
			}, {
				title: 'Performance Series',
				workoutsNum: 9,
				bgImgId: 2
			}, {
				title: 'Slow Pulls and Fast Intervals',
				time: '44:13',
				miles: '9,948',
				bgImgId: 3
			}, {
				title: '20 Minutes to Toned',
				workoutsNum: 12,
				bgImgId: 4
			}, {
				title: 'Charles Race, Boston, Massachusetts',
				time: '36:22',
				miles: '8,6487',
				bgImgId: 5
			}, {
				title: 'Full-Body HIIT Series',
				workoutsNum: 12,
				bgImgId: 6
			}, {
				title: 'Kafue River, Zambia—Power Stroke Pyramid',
				time: '22:22',
				miles: '4,660',
				bgImgId: 7
			}, {
				title: 'Shred & Burn Series',
				workoutsNum: 16,
				bgImgId: 8
			}];
			
			const gridItemsPerRow = 4, 
				gridNumRows = 2, 
				rawGridTemplate = document.querySelector('#grid-card-template').innerHTML, 
				gridEl = document.querySelector('.grid-container');

			const cardGridNodes = generateCardGrid(
				cardsData, 
				rawGridTemplate, 
				gridItemsPerRow, 
				gridNumRows, 
				// TODO: Might not even need these properties
				['is-centered', 'is-variable', 'is-6'],
				['title', 'workoutsNum', 'time', 'miles', 'hasDetails', 'bgImgId']);
			
			document.querySelector('#grid-roller').setAttribute('style', 'display:none');
			cardGridNodes.forEach(rowNode => gridEl.appendChild(rowNode));


			// // Render equipment card grid
			const equipmentData = [{
				name: 'Treadmills',
				bgImg: ''
			}, {
				name: 'Bikes',
				bgImg: ''
			}, {	
				name: 'Ellipticals',
				bgImg: ''
			}, {
				name: 'Strength',
				bgImg: ''
			}];

			const equipmentGridItemsPerRow = 4,
				equipmentNumRows = 1,
				equipmentRawGridTemplate = document.querySelector('#equipment-grid-template').innerHTML,
				equipmentGridEl = document.querySelector('.equipment-grid-container');
				
			const equipmentGridNodes = generateCardGrid(
				equipmentData, 
				equipmentRawGridTemplate, 
				equipmentGridItemsPerRow, 
				equipmentNumRows, 
				[],
				['name', 'imgSrc']
			);
			
			document.querySelector('#grid-roller').setAttribute('style', 'display:none');
			equipmentGridNodes.forEach(rowNode => equipmentGridEl.appendChild(rowNode));

			// Generic grid rendering function
			function generateCardGrid (cardsData, rawTemplate, itemsPerRow, numRows, rowClasses, properties) {
				const rowNodes = [];

				for (let i = 0; i < numRows; i++) {
					let rowNode = document.createElement('div');
					
					rowNode.classList.add('columns', ...rowClasses);
					rowNodes.push(rowNode);
				}

				let currentRow = 0;
				const compiledGridCardTemplate = _.template(rawTemplate);

				cardsData.forEach((card, index) => {
					let column = document.createElement('div');
						
					column.classList.add('column');

					const templateVariables = properties.reduce((accumulator, currentVal) => {
						accumulator[currentVal] = card[currentVal];

						return accumulator;
					}, {});

					column.innerHTML = compiledGridCardTemplate(templateVariables);

					rowNodes[currentRow].appendChild(column);

					if ((index + 1) / itemsPerRow === 1) currentRow++;
				});

				return rowNodes;
			}
		</script>
	</body>
</html>